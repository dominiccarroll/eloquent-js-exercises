<!doctype html>

<div id="wrapper">
  <div data-tabname="one">Tab one</div>
  <div data-tabname="two">Tab two</div>
  <div data-tabname="three">Tab three</div>
</div>
<script>
  function asTabs(node) {
    // exercise starts here
    for (var i = 0; i < node.children.length; i++) {
        (function() {var child = node.children[i]; // we need to make this a seperate scope due to it being a for loop. poor design choices. 
        child.style.display = "none";
        var btn = document.createElement("button");
        btn.className = "tab";
        btn.innerHTML = child.getAttribute("data-tabname");
        node.parentNode.insertBefore(btn, node);
        btn.addEventListener("click", function(event) {

            // For some reason I was getting a bug. Thats why I did for loops. Now I have 2 for loops. This is a stupid design, I KNOW!
            for (var i2 = 0; i2 < node.children.length; i2++) {
                var c2 = node.children[i2];
                c2.style.display = "none";
            }
            child.style.display = "inline";

            // now we will style the buttons
            var buttons = document.getElementsByClassName("tab");
            for (var b = 0; b < buttons.length; b++) {
                var button = buttons[b];
                button.style.backgroundColor = "white";
            }
            btn.style.backgroundColor = "lightblue";

        });
    })();
    }
  }
  asTabs(document.querySelector("#wrapper"));
</script>